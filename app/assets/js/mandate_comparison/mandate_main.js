var agency_names = ['Alco Water Service','Alhambra City of','Amador Water Agency','American Canyon City of','Anaheim City of','Anderson City of','Antioch City of','Apple Valley Ranchos Water Company','Arcadia City of','Arcata City of','Arroyo Grande  City of','Arvin Community Services District','Atwater City of','Azusa City of','Bakersfield City of','Bakman Water Company','Banning City of','Beaumont-Cherry Valley Water District','Bella Vista Water District','Bellflower-Somerset Mutual Water Company','Benicia City of','Beverly Hills  City of','Big Bear City Community Services District','Blythe City of','Brawley City of','Brea City of','Brentwood City of','Buena Park City of','Burbank City of','Burlingame City of','Calaveras County Water District','Calexico City of','California City City of','CalWater Antelope Valley','CalWater Bakersfield','CalWater Bear Gulch','CalWater Chico District','CalWater Dixon City of','CalWater Dominguez','CalWater East Los Angeles','CalWater Hermosa/Redondo','CalWater Kern River Valley','CalWater King City','CalWater Livermore','CalWater Los Altos/Suburban','CalWater Marysville','CalWater Mid Peninsula','CalWater Oroville','CalWater Palos Verdes','CalWater Redwood Valley','CalWater Salinas District','CalWater Selma','CalWater South San Francisco','CalWater Stockton','CalWater Visalia','CalWater Westlake','CalWater Willows','CalAm Water Company Los Angeles District','CalAm Water Company Monterey District','CalAm Water Company Sacramento District','CalAm Water Company San Diego District','CalAm Water Ventura District','Camarillo City of','Cambria Community Services District','Camrosa Water District','Carlsbad Municipal Water District','Carmichael Water District','Carpinteria Valley Water District','Casitas Municipal Water District','Castaic Lake Water Agency Santa Clarita Water Division','Ceres City of','Cerritos  City of','Chino City of','Chino Hills City of','Citrus Heights Water District','City of Big Bear Lake, Dept of Water & Power','Clovis City of','Coachella Valley Water District','Coastside County Water District','Colton City of','Compton City of','Contra Costa Water District','Corona City of','Covina City of','Crescent City City of','Crescenta Valley Water District','Crestline Village Water District','Cucamonga Valley Water District','Daly City City of','Davis  City of','Del Oro Water Company','Delano City of','Desert Water Agency','Diablo Water District','Dinuba City of','Discovery Bay Community Services District','Downey  City of','Dublin San Ramon Services District','East Bay MUD','East Niles Community Service District','East Orange County Water District','East Palo Alto, City of','East Valley Water District','Eastern Municipal Water District','El Centro City of','El Dorado Irrigation District','El Monte City of','El Toro Water District','Elk Grove Water Service','Elsinore Valley Municipal Water District','Escondido City of','Estero Municipal Improvement District','Eureka City of','Exeter City of','Fair Oaks Water District','Fairfield City of','Fallbrook Public Utility District','Folsom City of','Fountain Valley City of','Fresno City of','Fruitridge Vista Water Company','Fullerton City of','Garden Grove City of','Georgetown Divide Public Utilities District','Gilroy  City of','Glendale City of','Glendora City of','Golden State Water Company Artesia','Golden State Water Co. Barstow','Golden State Water Co. Bay Point','Golden State Water Company Bell-Bell Gardens','Golden State Water Co. Claremont','Golden State Water Co. Cordova','Golden State Water Company Culver City','Golden State Water Co. Florence Graham','Golden State Water Co, Norwalk','Golden State Water Co. Orcutt','Golden State Water Co. Placentia','Golden State Water Co. S Arcadia','Golden State Water Co. S San Gabriel','Golden State Water Co. San Dimas','Golden State Water Co. Simi Valley','Golden State Water Co. Southwest','Golden State Water Co. West Orange','Goleta Water District','Greenfield City of','Groveland Community Services District','Hanford City of','Hawthorne City of','Hayward  City of','Healdsburg  City of','Helix Water District','Hemet City of','Hesperia Water District City of','Hi-Desert Water District','Hillsborough Town of','Hollister City of','Humboldt Bay Municipal Water District','Humboldt Community Service District','Huntington Beach City of','Huntington Park City of','Imperial City of','Indian Wells Valley Water District','Indio  City of','Inglewood City of','Irvine Ranch Water District','Joshua Basin Water District','Jurupa Community Service District','Kerman City of','Kingsburg City of','La Habra City of Public Works','La Palma City of','La Verne City of','Laguna Beach County Water District','Lake Arrowhead Community Services District','Lake Hemet Municipal Water District','Lakeside Water District','Lakewood City of','Lamont Public Utility District','Las Virgenes Municipal Water District','Lathrop, City of','Lee Lake Water District','Lemoore City of','Lincoln City of','Lincoln Avenue Water Company','Linda County Water District','Livermore City of Division of Water Resources','Livingston City of','Lodi City of Public Works Department','Loma Linda City of','Lomita City of','Lompoc  City of','Long Beach City of','LA County Public Works Waterworks District 29','LA County Public Works Waterworks District 40','LA Department of Water and Power','Los Banos City of','Manhattan Beach City of','Manteca City of','Marin Municipal Water District','Marina Coast Water District','Menlo Park  City of','Merced City of','Mesa Water District','Mid-Peninsula WD','Millbrae City of','Milpitas  City of','Modesto, City of','Monte Vista Water District','Montebello Land and Water Company','Montecito Water District','Monterey Park City of','Morgan Hill City of','Morro Bay City of','Moulton Niguel Water District','Mountain View City of','Napa City of','Nevada Irrigation District','Newhall County Water District','Newport Beach City of','Nipomo Community Services District','Norco City of','North Coast County Water District','North Marin Water District','North Tahoe PUD','Norwalk City of','Oakdale  City of','Oceanside City of','Oildale Mutual Water Company','Olivehurst PUD','Olivenhain MWD','Ontario City of','Orange  City of','Orange Vale Water Company','Orchard Dale Water District','Otay Water District','Padre Dam Municipal Water District','Palmdale Water District','Palo Alto City of','Paradise Irrigation District','Paramount City of','Park Water Company','Pasadena City of','Paso Robles  City of','Patterson City of',"'Perris, City of'",'Petaluma  City of','Phelan Pinon Hills Community Services District','Pico Rivera City of','Pico Water District','Pismo Beach City of','Pittsburg City of','Placer County Water Agency','Pleasanton City of','Pomona  City of','Port Hueneme City of','Porterville  City of','Poway  City of','Quartz Hill Water District','Rainbow Municipal Water District','Ramona Municipal Water District','Rancho California Water District','Redding City of','Redlands  City of','Redwood City City of','Reedley City of','Rialto  City of','Rincon Del Diablo Municipal Water District','Rio Linda - Elverta Community Water District','Rio Vista City of','Ripon City of','Riverside City of','Riverside Highland Water Company','Rohnert Park City of','Rosamond Community Service District','Roseville City of','Rowland Water District','Rubidoux Community Service District','Rubio Canyon Land and Water Association','Sacramento City of','Sacramento County Water Agency','Sacramento Suburban Water District','San Bernardino City of','San Bernardino County Service Area 64','San Bernardino County Service Area 70J','San Bruno  City of','San Buenaventura City of','San Clemente City of','San Diego City of','San Dieguito Water District','San Fernando City of','San Francisco PUC','San Gabriel County WD','San Gabriel Valley Fontana Water Company','San Gabriel Valley Water Company','San Jacinto City of','San Jose City of','San Jose Water Company','San Juan Capistrano City of','San Juan Water District','San Lorenzo Valley Water District','San Luis Obispo City of','Sanger City of','Santa Ana City of','Santa Barbara City of','Santa Clara City of','Santa Cruz City of','Santa Fe Irrigation District','Santa Fe Springs City of','Santa Margarita Water District','Santa Maria City of','Santa Monica City of','Santa Paula City of','Santa Rosa City of','Seal Beach  City of','Shafter City of','Sierra Madre City of','Soledad City of','Sonoma City of','Soquel Creek Water District','South Coast Water District','South Gate City of','South Pasadena City of','South Tahoe PUD','Stockton City of','Suburban Water Systems San Jose Hills','Suburban Water Systems Whittier/La Mirada','Suisun-Solano Water Authority','Sunny Slope Water Company','Sunnyslope County WD','Sweetwater Authority','Sweetwater Springs WD','Tahoe City Public Utilities District','Tehachapi City of','Thousand Oaks City of','Torrance City of','Trabuco Canyon Water District','Tracy City of','Triunfo Sanitation District / Oak Park Water Service','Truckee-Donner Public Utilities District','Tulare City of','Tuolumne Utilities District','Turlock City of','Tustin City of','Twentynine Palms Water District','Upland City of','Vacaville  City of','Valencia Water Company','Vallecitos Water District','Vallejo City of','Valley Center Municipal Water District','Valley County Water District','Valley Water Company','Valley of the Moon Water District','Vaughn Water Company','Ventura County Waterworks District No 1','Ventura County Waterworks District No 8','Vernon City of','Victorville Water District','Vista Irrigation District','Walnut Valley Water District','Wasco City of','Watsonville City of','West Kern Water District','West Sacramento City of','West Valley Water District','Westborough Water District','Western Municipal Water District of Riverside','Westminster City of','Whittier City of','Windsor Town of','Woodland City of','Yorba Linda Water District','Yreka City of','Yuba City City of','Yucaipa Valley WD'];

var my_data = [
["conservation_standard",24.0001,24.0002,24.0003,20.0001,20.0002,36.0001,28.0001,28.0001,36.0002,4.0001,28.0001,28.0002,36.0003,20.0003,36.0004,36.0005,32.0001,36.0006,36.0007,20.0004,20.0005,32.0002,16.0001,32.0001,32.0002,24.00011,32.0003,20.00011,24.00012,16.00011,16.00012,20.00011,36.00011,36.00012,32.00012,36.00013,32.00013,28.00011,16.00013,8.0002,20.00078,28.00012,12.0001,24.00013,32.00014,24.00014,16.00014,28.00013,36.00014,16.00015,16.00016,32.00015,8.0001,20.00012,32.00016,36.00015,28.00014,28.00015,8.0003,20.00013,8.0004,32.00017,20.00014,8.0005,32.00018,28.00016,36.00016,20.00088,32.000019,32.00021,28.00017,28.00018,24.00015,28.00021,32.00022,16.00017,36.00017,36.00018,8.0006,20.00015,8.0007,28.00022,28.00023,28.00024,16.00018,20.00016,8.0008,32.00023,8.0009,28.00025,24.00016,24.00017,36.00019,28.00026,32.00024,32.00025,20.00017,12.00012,16.00019,36.00021,36.00022,8.000101,28.00027,28.00028,24.00018,28.00029,8.00011,24.00019,28.00031,28.00032,20.00018,12.00013,4.000101,36.00027,36.00028,20.00019,36.00029,32.00026,20.00021,28.00033,36.00031,28.00034,20.00022,32.00027,24.00021,20.00023,36.00032,16.0002,24.000103,12.00014,8.00012,32.00028,36.00033,16.00021,8.00013,12.00015,32.00029,24.00022,24.00023,12.00016,28.00035,24.00024,12.00017,16.00022,12.00018,16.00023,24.00025,28.00036,16.00024,8.00014,24.00026,20.000111,32.00031,32.00032,16.000112,36.00034,20.00024,4.0002,24.00027,20.00025,8.00015,24.00028,36.00035,32.00033,12.00019,16.000113,28.00037,28.00038,32.00034,36.00036,28.00039,20.00026,32.00035,24.00029,16.000122,28.00041,20.00027,20.00028,28.00042,36.00037,20.00029,32.00036,32.00037,32.00038,28.00043,32.00039,20.00031,32.0004,32.00041,32.00042,20.00032,12.0002,16.000221,36.00038,32.000043,16.000114,28.00043,20.00033,32.00044,20.00034,12.00021,16.000115,36.00039,20.00035,20.00036,16.000117,12.00022,36.00041,24.00031,16.000116,32.00045,20.00037,28.00051,12.00023,20.00038,16.000118,20.00039,36.00042,28.00052,28.00053,28.00054,36.00043,8.00016,24.00032,28.00055,20.00041,32.00046,20.00042,36.00044,36.00045,32.00047,24.00033,28.00056,36.00046,12.00024,20.00043,20.00044,32.00048,24.00034,36.00047,12.00025,8.00017,28.00057,28.00058,28.00059,24.00035,16.000225,32.00049,16.000223,24.00036,24.00037,20.00046,32.0005,24.00038,20.00045,8.00018,32.00051,32.00052,36.00048,36.00051,28.000123,36.00052,36.00053,36.00054,8.00019,24.00039,28.000122,32.00053,36.00055,36.00056,36.00057,28.000124,36.00058,16.000444,28.000125,28.000126,20.00047,28.00021,36.00059,28.000127,32.00054,32.00055,28.000128,32.00056,28.000129,8.00022,16.000333,24.00041,16.000321,28.000131,24.00042,8.00023,20.00048,28.000132,16.000234,32.00057,20.00049,20.00051,28.000187,36.00061,12.00026,12.00027,28.000189,12.00028,12.00029,16.000443,8.00024,36.00062,16.000444,24.00043,16.000445,20.00052,28.000237,16.000331,8.00025,36.00063,32.00058,24.00044,28.000441,8.00026,24.00045,12.0003,28.000442,20.00053,28.000442,24.00046,28.000443,28.000444,24.00047,28.000445,12.00031,16.000109,20.00054,28.000446,28.000447,20.00055,28.000448,28.000449,32.00059,28.000451,32.0006,24.00048,32.00061,28.000452,28.000453,36.000111,32.00062,24.00049,24.00051,16.00091,36.00064,16.00092,36.00065,20.00056,36.00066,32.00063,28.000477,8.00027,28.000479,20.000111,28.000481,36.00067,20.000112,28.000491,28.000492,32.00064,8.00028,32.00065,20.000221,20.000222,16.000991,24.00052,36.00068,32.00066,32.00067,36.00069],
['conservation_percent_15',22,27,33,27,26,27,36,32,29,1,37,35,36,24,32,34,32,26,55,20,36,20,24,15,36,18,44,24,27,34,37,19,20,42,34,38,43,35,13,17,19,18,22,46,39,32,29,30,31,38,29,41,24,27,26,34,36,30,17,40,28,27,24,42,26,26,37,34,34,35,26,26,24,26,41,20,33,30,23,20,15,40,23,25,17,30,23,30,13,31,44,24,33,35,36,40,23,43,30,32,39,21,33,20,19,32,16,25,39,26,35,18,13,34,39,27,24,33,26,30,38,25,23,37,34,25,36,17,28,30,16,45,38,19,13,21,40,31,30,14,35,37,15,25,29,26,35,10,11,34,28,28,26,26,10,44,26,-7,11,25,15,18,27,24,18,18,26,26,27,39,25,26,32,22,34,39,32,29,29,34,34,34,20,37,32,39,40,10,30,24,22,28,19,24,39,18,26,23,32,23,33,48,43,25,32,28,27,32,30,19,47,18,37,18,23,35,27,37,31,23,35,26,33,35,29,18,43,26,30,40,34,23,28,41,20,27,33,29,34,46,21,20,24,34,30,26,28,17,21,24,26,26,25,45,26,21,35,37,39,38,33,30,32,23,32,24,21,34,39,34,30,26,34,19,31,39,18,21,31,34,40,36,31,34,31,26,25,28,25,22,23,16,25,30,37,34,34,36,27,41,29,24,25,20,38,27,31,41,26,29,18,22,31,28,22,31,24,21,35,33,32,12,30,24,34,27,26,28,29,37,26,28,37,31,32,24,33,33,36,35,27,40,27,29,17,32,37,37,31,25,40,25,31,32,30,28,30,3,29,29,29,26,25,23,40,22,23,28,20,21,26,36,41,21,32,25]];

var my_chart_parameters = {
	"bindto": "#chart1",
	"data": {
  	"x": "conservation_standard",
    "y": "conservation_percent_15",
  	"columns": my_data,
    "type": "scatter",
    "colors": {
    	"conservation_percent_15": "#0000ff",
      },
    "selection": {
    	"enabled": false
    },
	},
  "tooltip": {
  	"show": true,
    "format": {
    	"title": function(value) { 
        if (my_data[0].indexOf(value) == -1) {
          var index = my_data[1].indexOf(value);
          return agency_names[index - 1];
        } else {
          var index = my_data[0].indexOf(value);
          return agency_names[index - 1];
        }
      }
    }
	},  
  "legend": {
  	"show": true
  },
	"axis": {
		"x": {
    	"label": "Conservation mandate (%)",
      "min": 0,
      "max": 50,
			"tick": {
      	"values": [10, 20, 30, 40, 50],
       }
		},
    "y": {
    	"label": "Conservation in summer 2015 (%)",
      "min":0,
      "max":60,
    }
	},
  "point": {
  	"r": 5,
    "show": false,
    "focus": {
    	"expand": {
      	"r": 10,
        "enabled": true
      }
    }
  }
};

var mandate_chart = c3.generate(my_chart_parameters);

var slide = function(){
	mandate_chart.data.names({
  	  conservation_standard: 'Conservation mandate',
      conservation_percent_15: 'Conservation in summer 2015(%)'
  })
	mandate_chart.load({
  	columns:[
 ["1:1 line",4,4,4,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36]
    ],
    type: "line",
  });
  document.getElementById("message1").innerHTML = "Hover over the scatter plot to see what each individual utility accomplished. In this interactive plot, dots under the 1:1 line represent utilities with lower conservation levels than their mandated target in summer 2015, and dots above the line represent utilities that surpassed their conservation goal"
};

slide();