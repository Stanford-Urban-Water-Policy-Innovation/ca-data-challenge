// C3 init

var agency_names2 = ['Alco Water Service','Alhambra  City of','Amador Water Agency','American Canyon, City of','Anaheim  City of','Anderson, City of','Antioch  City of','Apple Valley Ranchos Water Company','Arcadia  City of','Arcata  City of','Arroyo Grande  City of','Arvin Community Services District','Atwater  City of','Azusa  City of','Bakersfield  City of','Bakman Water Company','Banning  City of','Beaumont-Cherry Valley Water District','Bella Vista Water District','Bellflower-Somerset Mutual Water Company','Benicia  City of','Beverly Hills  City of','Big Bear City Community Services District','Brawley  City of','Brea  City of','Brentwood  City of','Buena Park  City of','Burbank  City of','Burlingame  City of','Calaveras County Water District','California City  City of','California Water Service Company Antelope Valley','California Water Service Company Bakersfield','California Water Service Company Bear Gulch','California Water Service Company Chico District','California Water Service Company Dixon, City of','California Water Service Company Dominguez','California Water Service Company East Los Angeles','California Water Service Company Hermosa/Redondo','California Water Service Company Kern River Valley','California Water Service Company King City','California Water Service Company Livermore','California Water Service Company Los Altos/Suburban','California Water Service Company Marysville','California Water Service Company Mid Peninsula','California Water Service Company Oroville','California Water Service Company Palos Verdes','California Water Service Company Redwood Valley','California Water Service Company Salinas District','California Water Service Company Selma','California Water Service Company South San Francisco','California Water Service Company Stockton','California Water Service Company Visalia','California Water Service Company Westlake','California Water Service Company Willows','California-American Water Company Los Angeles District','California-American Water Company Monterey District','California-American Water Company Sacramento District','California-American Water Company San Diego District','California-American Water Ventura District','Camarillo  City of','Cambria Community Services District','Camrosa Water District','Carlsbad Municipal Water District','Carmichael Water District','Carpinteria Valley Water District','Casitas Municipal Water District','Castaic Lake Water Agency Santa Clarita Water Division','Ceres  City of','Cerritos  City of','Chino  City of','Chino Hills  City of','Citrus Heights Water District',"'City of Big Bear Lake, Dept of Water & Power'",'Clovis  City of','Coachella Valley Water District','Coastside County Water District',"'Colton, City of'",'Contra Costa Water District','Corona  City of','Covina  City of ','Crescent City  City of','Crescenta Valley Water District','Crestline Village Water District','Cucamonga Valley Water District','Daly City  City of','Davis  City of','Del Oro Water Company','Delano  City of','Desert Water Agency','Diablo Water District','Discovery Bay Community Services District','Downey  City of','Dublin San Ramon Services District','East Niles Community Service District','East Orange County Water District','East Valley Water District','Eastern Municipal Water District','El Centro  City of','El Dorado Irrigation District','El Toro Water District','Elk Grove Water Service','Elsinore Valley Municipal Water District','Escondido  City of','Estero Municipal Improvement District','Eureka  City of','Fair Oaks Water District','Fairfield  City of','Fallbrook Public Utility District','Folsom  City of','Fountain Valley  City of','Fresno  City of','Fruitridge Vista Water Company','Fullerton  City of','Garden Grove  City of','Georgetown Divide Public Utilities District','Gilroy  City of','Glendale  City of','Glendora  City of','Golden State Water Company Artesia','Golden State Water Company Barstow','Golden State Water Company Bay Point','Golden State Water Company Bell-Bell Gardens','Golden State Water Company Claremont','Golden State Water Company Cordova','Golden State Water Company Culver City','Golden State Water Company Florence Graham','Golden State Water Company Norwalk','Golden State Water Company Orcutt','Golden State Water Company Placentia','Golden State Water Company S Arcadia','Golden State Water Company S San Gabriel','Golden State Water Company San Dimas','Golden State Water Company Simi Valley','Golden State Water Company Southwest','Golden State Water Company West Orange','Goleta Water District','Greenfield, City of','Groveland Community Services District','Hanford  City of','Hawthorne  City of','Hayward  City of','Healdsburg  City of','Helix Water District','Hemet  City of','Hesperia Water District City of','Hi-Desert Water District','Hillsborough  Town of','Humboldt Bay Municipal Water District','Humboldt Community Service District','Huntington Beach  City of','Huntington Park  City of','Imperial, City of','Indian Wells Valley Water District','Indio  City of','Inglewood  City of','Irvine Ranch Water District','Joshua Basin Water District','Jurupa Community Service District','Kerman, City of','Kingsburg, City of','La Habra  City of Public Works','La Palma  City of','Laguna Beach County Water District','Lake Arrowhead Community Services District','Lake Hemet Municipal Water District','Lakeside Water District','Lakewood  City of','Lamont Public Utility District','Lathrop, City of ','Lee Lake Water District','Lemoore  City of','Lincoln  City of','Lincoln Avenue Water Company','Linda County Water District','Livermore  City of Division of Water Resources','Livingston  City of','Lodi  City of Public Works Department','Loma Linda  City of','Lomita  City of','Lompoc  City of','Long Beach  City of','Los Angeles County Public Works Waterworks District 29','Los Angeles County Public Works Waterworks District 40','Los Angeles Department of Water and Power','Los Banos, City of','Manhattan Beach  City of','Manteca  City of','Marin Municipal Water District','Marina Coast Water District','Menlo Park  City of','Merced  City of','Mesa Water District','Mid-Peninsula Water District','Millbrae  City of','Milpitas  City of','Modesto, City of','Monrovia  City of','Monte Vista Water District','Montebello Land and Water Company','Montecito Water District','Morgan Hill  City of','Morro Bay  City of','Moulton Niguel Water District','Mountain View  City of','Napa  City of','Nevada Irrigation District','Newhall County Water District','Newport Beach  City of','Nipomo Community Services District','Norco  City of','North Coast County Water District','North Marin Water District','North Tahoe Public Utility District','Norwalk City of','Oakdale  City of','Oceanside  City of','Oildale Mutual Water Company','Olivehurst Public Utility District','Olivenhain Municipal Water District','Ontario  City of','Orange  City of','Orange Vale Water Company','Orchard Dale Water District','Otay Water District','Padre Dam Municipal Water District','Palmdale Water District','Palo Alto  City of','Paradise Irrigation District','Paramount  City of','Park Water Company','Pasadena  City of','Paso Robles  City of',"'Perris, City of'",'Petaluma  City of','Phelan Pinon Hills Community Services District','Pico Rivera  City of','Pico Water District','Pittsburg  City of','Placer County Water Agency','Pleasanton  City of','Pomona  City of','Port Hueneme  City of','Porterville  City of','Poway  City of','Quartz Hill Water District','Rainbow Municipal Water District','Ramona Municipal Water District','Rancho California Water District','Redding  City of','Redlands  City of','Redwood City  City of','Reedley  City of','Rialto  City of','Rincon Del Diablo Municipal Water District','Rio Linda - Elverta Community Water District','Rio Vista, city of','Ripon  City of','Riverside  City of','Riverside Highland Water Company','Rohnert Park  City of','Rosamond Community Service District','Rowland Water District','Rubidoux Community Service District','Rubio Canyon Land and Water Association','Sacramento  City of','Sacramento County Water Agency','Sacramento Suburban Water District','San Bernardino  City of','San Bernardino County Service Area 64','San Bernardino County Service Area 70J','San Bruno  City of','San Buenaventura  City of','San Clemente  City of','San Diego  City of','San Dieguito Water District','San Fernando  City of','San Francisco Public Utilities Commission','San Gabriel County Water District','San Gabriel Valley Fontana Water Company','San Gabriel Valley Water Company','San Jacinto  City of','San Jose  City of','San Jose Water Company','San Juan Capistrano  City of','San Juan Water District','San Lorenzo Valley Water District','San Luis Obispo  City of','Sanger  City of','Santa Ana  City of','Santa Barbara  City of','Santa Clara  City of','Santa Cruz  City of','Santa Fe Irrigation District','Santa Fe Springs  City of','Santa Margarita Water District','Santa Maria  City of','Santa Monica  City of','Santa Paula  City of','Santa Rosa  City of','Seal Beach  City of','Shafter  City of','Soledad, City of','Sonoma  City of','Soquel Creek Water District','South Coast Water District','South Gate  City of','South Pasadena  City of','South Tahoe Public Utilities District','Stockton  City of','Suburban Water Systems San Jose Hills','Suburban Water Systems Whittier/La Mirada','Suisun-Solano Water Authority','Sunny Slope Water Company','Sunnyslope County Water District','Sweetwater Authority','Sweetwater Springs Water District','Tahoe City Public Utilities District','Thousand Oaks  City of','Trabuco Canyon Water District','Triunfo Sanitation District / Oak Park Water Service','Truckee-Donner Public Utilities District','Tulare, City of','Tuolumne Utilities District','Turlock  City of','Tustin  City of','Twentynine Palms Water District','Upland  City of','Vacaville  City of','Valencia Water Company','Vallecitos Water District','Vallejo  City of','Valley Center Municipal Water District','Valley County Water District','Valley Water Company','Valley of the Moon Water District','Vaughn Water Company','Ventura County Waterworks District No 1','Ventura County Waterworks District No. 8','Victorville Water District','Vista Irrigation District','Wasco  City of','Watsonville  City of','West Kern Water District','West Sacramento  City of','West Valley Water District','Westborough Water District','Western Municipal Water District of Riverside','Westminster  City of',"'Windsor, Town of'",'Woodland  City of','Yorba Linda Water District','Yreka, City of','Yuba City  City of','Yucaipa Valley Water District'];

var my_data2 = [["conservation_percent_16",23.14462826,26.87666654,18.62390427,27.89915966,15.89560495,20.66413057,25.10482602,28.2384261,24.33184855,-0.833393927,36.28271128,16.42811052,22.33071649,18.79360315,20.70066184,34.2689828,21.14060964,11.72516154,36.59691462,16.39851046,38.02096394,20.28779483,14.91880059,27.69834255,17.20954988,28.9418933,19.13404767,23.97266417,26.52628033,17.4312494,17.96554009,38.79577902,24.28505777,24.59831104,31.58122815,29.71706951,12.4134656,15.41055621,17.20319045,16.03213413,31.72804533,29.16646416,24.38430954,20.97977853,20.18242421,26.20275575,20.44113515,32.79766253,25.8731998,38.0162372,22.74175106,18.99496737,19.1666091,25.1164888,30.54656598,22.42556282,15.45429856,27.19725819,12.24371932,22.91319637,19.20198865,34.84029261,16.96706587,16.63583189,22.57418077,27.34860065,8.66805383,17.54614767,23.78002901,15.6447583,15.73778164,15.63397392,22.94827586,11.11111111,20.10124428,22.35587788,14.05188926,9.647579765,28.51258171,14.26680389,16.6389186,13.58870404,21.04543644,8.998780368,18.94319362,8.214525623,19.92533186,39.66422341,18.72813709,24.49750127,22.2542292,20,16.56641758,30.79444168,20.08108108,28.55325914,24.26813623,15.57520929,13.37020998,15.37031298,26.21132401,22.04744446,10.58347009,24.63731767,7.929485724,13.96183283,21.81156429,13.04347826,16.25458888,10.98756576,21.31578947,22.68509237,24.91594747,18.62163264,15.35844248,20.95265714,24.76066942,19.30319558,21.64760297,12.83706798,23.89372897,21.28489007,13.41716181,27.3310543,20.83851454,14.10528948,9.037216253,8.830968105,28.71073015,18.86218436,25.21939544,14.29146538,22.11937132,22.2817354,12.46102919,18.05558456,27.85038792,15.91362126,22.26468348,19.41023318,11.79225202,25.4229372,19.34139556,18.07263643,19.53332383,16.57111152,1.245972946,27.31355676,-2.099869386,7.165291253,14.87530249,14.51612903,10.1149956,22.31369435,21.3333914,15.74970796,15.85680693,14.55807542,15.34487064,19.94658204,26.69052972,10.22624928,20.67674242,15.53306331,15.21329672,29.41723085,21.82911715,18.54613498,21.71785266,20.44013497,18.89475903,19.56937052,17.24104774,21.50581255,22.95604917,24.26402263,7.615326429,19.64453247,13.89570283,17.57585587,25.39749798,13.7250195,11.07451626,23.26073589,14.00589748,21.81662431,16.98208573,22.58604112,12.03199413,34.9290276,39.73824532,36.39179984,13.80870355,23.33166841,20.14103267,22.4986245,24.56074328,17.05850639,21.95790806,17.02258582,46.88090737,22.40993227,22.76292366,16.40590718,27.41283477,17.4497992,18.55070382,18.23678042,19.19509486,28.13367113,16.49700489,37.77117965,13.53901996,14.3714806,12.0308835,24.3246115,17.24206792,22.07366985,25.49646584,17.21134827,14.53984136,17.88093843,25.87941776,6.337900097,16.38132296,20.47615243,21.74946287,19.06869474,34.27101576,7.333210614,20.39964211,18.66027081,23.01700316,27.84263652,24.13575236,9.110334832,15.68803803,20.29775656,18.08892392,16.81804384,29.92593622,20.44619131,18.00564229,24.17123684,25.51500967,28.21205114,47.92011505,20.28542304,20.2385128,20.88482999,20.27621528,21.3142173,19.08218253,16.55169701,27.93103448,24.71345993,18.82042548,28.59638986,15.17489489,22.73924237,15.14851485,20.59178744,14.60208644,15.87014369,17.76223776,25.43564211,18.46144519,21.13398322,21.77043272,24.24059967,21.00786391,20.93729886,21.72074026,24.29823054,14.8477219,18.08344549,18.81773399,12.49538991,17.73538282,21.65124555,32.39259259,29.68006625,26.8115942,28.1776377,20.36853548,12.8078857,15.14190581,22.45558042,12.40886464,15.80340197,38.60879261,21.62236229,21.9330855,17.62830482,22.90748208,16.40700196,17.43358634,19.13931551,21.99201913,18.0220889,15.61170665,19.70149254,17.31937345,15.79146365,27.05247031,25.73919598,9.180226278,27.41839763,8.622939302,19.5569015,22.03881597,18.94834969,24.6460177,21.21887521,22.68681581,19.00287754,20.90225564,26.63243613,23.81038212,20.17982018,26.60009625,17.49693643,17.02187588,21.83856502,18.23832278,20.88914143,9.132576207,21.13022785,24.17865254,21.85073444,17.26842704,15.23079707,25.88521368,19.96017224,13.88866831,23.1796627,16.63724712,22.64876237,20.87638602,19.79856378,14.15200904,36.6608974,18.16036786,11.83418796,22.69223538,18.07892322,21.55618806,14.42991512,16.79790026,14.59700166,23.69171671,28.00702498,18.06896552,25.56082841,7.064683186],
["conservation_percent_17",19,21,10,29,19,13,21,29,17,3,32,19,21,10,9,34,24,7,26,16,22,17,17,27,13,18,19,20,23,18,20,26,14,20,27,31,11,14,18,15,12,28,19,13,13,28,15,32,21,36,25,22,18,20,26,21,17,24,16,17,19,14,11,18,19,24,42,8,15,12,17,16,22,14,21,15,8,10,28,12,18,10,17,17,15,-3,19,40,13,18,13,22,18,22,27,28,22,15,11,18,26,18,4,26,14,17,18,9,27,9,22,17,20,14,17,20,14,17,20,14,20,17,14,24,19,17,9,11,27,16,23,12,18,17,10,15,35,12,30,20,12,5,8,19,14,18,7,28,68,24,15,11,6,22,19,14,15,13,9,21,37,15,18,18,16,30,25,17,17,13,17,22,13,20,17,20,21,19,12,21,17,17,14,35,11,15,15,23,9,30,23,37,6,17,2,17,25,9,9,16,37,10,17,19,6,15,20,15,14,26,19,12,28,14,10,25,20,18,19,21,11,11,22,17,18,20,18,6,34,6,15,14,15,37,14,4,13,16,17,12,25,15,14,27,28,35,12,29,14,14,19,17,-4,16,27,24,10,21,11,15,12,17,13,12,14,24,13,11,16,18,18,21,21,17,19,16,18,12,15,17,33,10,23,24,25,23,3,10,15,13,45,16,19,21,22,25,17,20,22,14,15,13,14,13,24,23,21,21,4,19,21,18,20,15,16,22,21,30,22,26,25,20,13,22,13,22,10,16,18,15,16,12,27,14,10,11,11,20,17,15,18,20,20,15,20,13,19,27,16,11,23,23,11,20,6],
];

var my_chart_parameters = {
	"bindto": "#chart3",
	"data": {
  	"x": "conservation_percent_16",
    "y": "conservation_percent_17",
  	"columns": my_data2,
    "type": "scatter",
    "colors": {
    	"conservation_percent_17": "#0e9370",
      },
    "selection": {
    	"enabled": false
    },
	},
  "tooltip": {
  	"show": true,
    "format": {
    	"title": function(value) { 
          var index = my_data2[0].indexOf(value);
          return agency_names2[index - 1];
        }
      }
		},  
  "legend": {
  	"show": true
  },
	"axis": {
		"x": {
    	"label": "Conservation in summer 2016 (% wrt 2013)",
      "min": 0,
      "max": 60,
			"tick": {
      	"values": [10, 20, 30, 40, 50, 60],
       }
		},
    "y": {
    	"label": "Conservation in June 2017 (% wrt 2013)",
      "min":0,
      "max":60,
    }
	},
  "point": {
  	"r": 5,
    "show": false,
    "focus": {
    	"expand": {
      	"r": 10,
        "enabled": true
      }
    }
  }
};

var mandate_chart = c3.generate(my_chart_parameters);

var slide = function(){
	mandate_chart.data.names({
      conservation_percent_17: 'Conservation in June 2017 (%)'
  })
	mandate_chart.load({
  	columns:[
 ["1:1 line",-2.099869386,-0.833393927,1.245972946,6.337900097,7.064683186,7.165291253,7.333210614,7.615326429,7.929485724,8.214525623,8.622939302,8.66805383,8.830968105,8.998780368,9.037216253,9.110334832,9.132576207,9.180226278,9.647579765,10.1149956,10.22624928,10.58347009,10.98756576,11.07451626,11.11111111,11.72516154,11.79225202,11.83418796,12.0308835,12.03199413,12.24371932,12.40886464,12.4134656,12.46102919,12.49538991,12.8078857,12.83706798,13.04347826,13.37020998,13.41716181,13.53901996,13.58870404,13.7250195,13.80870355,13.88866831,13.89570283,13.96183283,14.00589748,14.05188926,14.10528948,14.15200904,14.26680389,14.29146538,14.3714806,14.42991512,14.51612903,14.53984136,14.55807542,14.59700166,14.60208644,14.8477219,14.87530249,14.91880059,15.14190581,15.14851485,15.17489489,15.21329672,15.23079707,15.34487064,15.35844248,15.37031298,15.41055621,15.45429856,15.53306331,15.57520929,15.61170665,15.63397392,15.6447583,15.68803803,15.73778164,15.74970796,15.79146365,15.80340197,15.85680693,15.87014369,15.89560495,15.91362126,16.03213413,16.25458888,16.38132296,16.39851046,16.40590718,16.40700196,16.42811052,16.49700489,16.55169701,16.56641758,16.57111152,16.63583189,16.63724712,16.6389186,16.79790026,16.81804384,16.96706587,16.98208573,17.02187588,17.02258582,17.05850639,17.20319045,17.20954988,17.21134827,17.24104774,17.24206792,17.26842704,17.31937345,17.4312494,17.43358634,17.4497992,17.49693643,17.54614767,17.57585587,17.62830482,17.73538282,17.76223776,17.88093843,17.96554009,18.00564229,18.0220889,18.05558456,18.06896552,18.07263643,18.07892322,18.08344549,18.08892392,18.16036786,18.23678042,18.23832278,18.46144519,18.54613498,18.55070382,18.62163264,18.62390427,18.66027081,18.72813709,18.79360315,18.81773399,18.82042548,18.86218436,18.89475903,18.94319362,18.94834969,18.99496737,19.00287754,19.06869474,19.08218253,19.13404767,19.13931551,19.1666091,19.19509486,19.20198865,19.30319558,19.34139556,19.41023318,19.53332383,19.5569015,19.56937052,19.64453247,19.70149254,19.79856378,19.92533186,19.94658204,19.96017224,20,20.08108108,20.10124428,20.14103267,20.17982018,20.18242421,20.2385128,20.27621528,20.28542304,20.28779483,20.29775656,20.36853548,20.39964211,20.44013497,20.44113515,20.44619131,20.47615243,20.59178744,20.66413057,20.67674242,20.70066184,20.83851454,20.87638602,20.88482999,20.88914143,20.90225564,20.93729886,20.95265714,20.97977853,21.00786391,21.04543644,21.13022785,21.13398322,21.14060964,21.21887521,21.28489007,21.3142173,21.31578947,21.3333914,21.50581255,21.55618806,21.62236229,21.64760297,21.65124555,21.71785266,21.72074026,21.74946287,21.77043272,21.81156429,21.81662431,21.82911715,21.83856502,21.85073444,21.9330855,21.95790806,21.99201913,22.03881597,22.04744446,22.07366985,22.11937132,22.2542292,22.26468348,22.2817354,22.31369435,22.33071649,22.35587788,22.40993227,22.42556282,22.45558042,22.4986245,22.57418077,22.58604112,22.64876237,22.68509237,22.68681581,22.69223538,22.73924237,22.74175106,22.76292366,22.90748208,22.91319637,22.94827586,22.95604917,23.01700316,23.14462826,23.1796627,23.26073589,23.33166841,23.69171671,23.78002901,23.81038212,23.89372897,23.97266417,24.13575236,24.17123684,24.17865254,24.24059967,24.26402263,24.26813623,24.28505777,24.29823054,24.3246115,24.33184855,24.38430954,24.49750127,24.56074328,24.59831104,24.63731767,24.6460177,24.71345993,24.76066942,24.91594747,25.10482602,25.1164888,25.21939544,25.39749798,25.4229372,25.43564211,25.49646584,25.51500967,25.56082841,25.73919598,25.8731998,25.87941776,25.88521368,26.20275575,26.21132401,26.52628033,26.60009625,26.63243613,26.69052972,26.8115942,26.87666654,27.05247031,27.19725819,27.31355676,27.3310543,27.34860065,27.41283477,27.41839763,27.69834255,27.84263652,27.85038792,27.89915966,27.93103448,28.00702498,28.13367113,28.1776377,28.21205114,28.2384261,28.51258171,28.55325914,28.59638986,28.71073015,28.9418933,29.16646416,29.41723085,29.68006625,29.71706951,29.92593622,30.54656598,30.79444168,31.58122815,31.72804533,32.39259259,32.79766253,34.2689828,34.27101576,34.84029261,34.9290276,36.28271128,36.39179984,36.59691462,36.6608974,37.77117965,38.0162372,38.02096394,38.60879261,38.79577902,39.66422341,39.73824532,46.88090737,47.92011505]
     ],
    type: "line",
  });
  document.getElementById("message3").innerHTML = "Hover over the scatter plot to see how each individual utility is doing. In this interactive plot, dots under the 1:1 line represent utilities where the conservation backsliding trend continues, with lower conservation levels in June 2017 than in the summer of 2016. Dots above the line represent utilities that are on their way to surpass their summer 2016 conservation levels "  
};

slide();